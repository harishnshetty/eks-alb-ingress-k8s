apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: store-ingress
  namespace: store-ns
  annotations:
    # Use AWS Load Balancer Controller
    kubernetes.io/ingress.class: alb

    # Internet-facing ALB
    alb.ingress.kubernetes.io/scheme: internet-facing

    # ALB Listener ports (HTTP + HTTPS)
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP":80},{"HTTPS":443}]'

    # Redirect HTTP â†’ HTTPS
    alb.ingress.kubernetes.io/actions.ssl-redirect: >
      {"Type":"redirect","RedirectConfig":{"Protocol":"HTTPS","Port":"443","StatusCode":"HTTP_301"}}

    # TLS certificate ARN (from ACM)
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:ap-south-1:123456789012:certificate/your-certificate-id

    # Target type: pods use IP mode
    alb.ingress.kubernetes.io/target-type: ip
spec:
  rules:
    # Android store domain
    - host: android.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: android-service
                port:
                  number: 80

    # iPhone store domain
    - host: iphone.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: iphone-service
                port:
                  number: 80

    # Laptop store domain
    - host: laptop.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: laptop-service
                port:
                  number: 80
